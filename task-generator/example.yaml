input_datetime:
    clean_pantry_last:
        name: Last Cleaned Pantry
        has_date: true
        has_time: false

input_number:
    clean_pantry_interval:
        name: Cleaned Pantry Interval (days)
        min: 1
        max: 365
        step: 1
        unit_of_measurement: days
        initial: 30

input_boolean:
    clean_pantry_enabled:
        name: Cleaned Pantry Enabled
        icon: mdi:pantry

input_text:
    clean_pantry_message:
        name: Clean Pantry Notification
        initial: "ğŸ§¹ The pantry is due for cleaning!"

template:
    - sensor:
          - name: "Cleaned Pantry Days Since"
            unique_id: clean_pantry_days_since
            unit_of_measurement: "days"
            state: >
                {% set dt = states('input_datetime.clean_pantry_last') %}
                {% if dt not in ('unknown','unavailable','') %}
                  {{ ((as_timestamp(now()) - as_timestamp(dt)) / 86400) | round(0) }}
                {% else %}
                  0
                {% endif %}

          - name: "Cleaned Pantry Overdue"
            unique_id: clean_pantry_overdue
            state: >
                {{ states('sensor.clean_pantry_days_since') | int
                   > states('input_number.clean_pantry_interval') | int }}
            icon: mdi:alert-circle
